import { useMutation } from '@tanstack/react-query'
import { deleteReq } from '@/utils/request'
import { Paths } from '@/types/api'
import { MSG_TYPE, NOTIFICATION_TYPE } from '@/utils/enums'
import { useTranslations } from 'next-intl'
import { showNotifications } from '@/utils/tsxHelpers'

const useDelete{{  pascalCase (singular name) }} = () => {
	const t = useTranslations()
	return useMutation({
		mutationFn: async ({ {{ camelCase (singular name) }}Id }: Paths.DeleteApiPathTo{{ pascalCase name }}.PathParameters) => {
			if ({{ camelCase (singular name) }}Id) {
				const { data } = await deleteReq('/api/v1/{{ dashCase name }}/{ {{ camelCase (singular name) }}Id }', { {{ camelCase (singular name) }}Id })
				return data
			}
			// throw error
			showNotifications([{ type: MSG_TYPE.ERROR, message: t('hooks.error.missingId') }], NOTIFICATION_TYPE.NOTIFICATION)
			return Promise.reject(new Error(t('hooks.error.missingId')))
		}
	})
}

export default useDelete{{  pascalCase (singular name) }}
